{% extends "base.html" %}
{% load crispy_forms_tags %}
{% load staticfiles %}


{% block title %}
    Search Home
{% endblock %}


{% block content %}
<script>
    $("#main-nav-bar > ul > li.active").removeClass("active")
    $("#navbarId-Search-Home").addClass("active")
</script>

<h1>Search Home</h1>
 <form method="POST" action="{% url 'search-result'%}">
        {% csrf_token %}



        <div class="panel panel-primary">
        <div class="panel-body">
          <ul class="nav nav-tabs">
            {% for tab in tabs %}
                {% if forloop.counter == 1 %}
                    <li class="active"><a data-toggle="tab" href="#{{tab.name|slugify}}">{{tab.name}}</a></li>
                {% else %}
                    <li><a data-toggle="tab" href="#{{tab.name|slugify}}">{{tab.name}}</a></li>
                {% endif %}
            {% endfor %}
          </ul>
        <br>
          <div class="tab-content">
            {% for tab in tabs %}
                {% if forloop.counter == 1 %}
                    <div id="{{tab.name|slugify}}" class="tab-pane fade in active">
                {% else %}
                    <div id="{{tab.name|slugify}}" class="tab-pane fade">
                {% endif %}
                    <div class="panel-group" id="accordion">
                        {% for panel in tab.panels %}
                            <div class="panel panel-primary">
                              <div class="panel-heading">
                                <h4 class="panel-title">
                                  <a data-toggle="collapse" data-parent="#accordion" href="#{{panel.name}}">{{panel.display_name}}</a>
                                </h4>
                              </div>
                              <div id="{{panel.name}}" class="panel-collapse collapse in">
                                <div class="panel-body">{{panel.form|crispy}}
                                {% for sub_form in panel.sub_form %}
                                <div class="panel panel-info">
                                    <div class="panel-heading">
                                        <h4 class="panel-title">
                                        <a data-toggle="collapse" href="#{{sub_form.name}}">{{sub_form.display_name}}</a>
                                        </h4>
                                    </div>
                                    <div id="{{sub_form.name}}" class="panel-collapse collapse in">
                                        <div class="panel-body">{{sub_form.form|crispy}}</div>
                                    </div>
                                </div>
                            {% endfor %}

                                </div>
                              </div>

                            </div>


                        {% endfor %}

                     </div>  {% comment %} End Accordion {% endcomment %}
                </div>
            {% endfor %}
          </div>

        </div>
        </div>


       <button type="submit" class="btn btn-success" id="load" data-loading-text="<i class='fa fa-circle-o-notch fa-spin'></i> Searching ...">Search</button> <input type="checkbox" name="terminate" value="Yes" checked="checked"> Terminate after 500 Hits?<br>
</form>

<br>


<script>
    $('.btn').on('click', function() {
        var $this = $(this);
        $this.button('loading');
    });

$(document).ready(function(){
    $('[data-toggle="popover"]').popover();

});

</script>
{% endblock %}
